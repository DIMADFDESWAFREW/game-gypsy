<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>Gypsy City Bottle Hunt</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<style>
  body { margin:0; background:#000; overflow:hidden; touch-action:none; }
  #game { width:100vw; height:100vh; display:block; }
</style>
</head>
<body>
<canvas id="game"></canvas>
<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
function resize(){canvas.width=innerWidth; canvas.height=innerHeight;}
resize(); addEventListener("resize",resize);

const WORLD_W=2500, WORLD_H=2500;

const gypsyImg=new Image(); gypsyImg.src="assets/gypsy.png";
const bottleImg=new Image(); bottleImg.src="assets/bottle.png";

const player={ x:200, y:200, speed:0.26 };

let bottles=[];
let lastSpawn=0;
const SPAWN_INTERVAL=900;
const BOTTLE_SCALE=0.5; // small bottles

function spawnBottle(){
  const x=Math.random()*(WORLD_W-200)+100;
  const y=Math.random()*(WORLD_H-200)+100;
  bottles.push({x,y,spawn:performance.now()});
}

function update(dt,now){
  if(now-lastSpawn>SPAWN_INTERVAL){ spawnBottle(); lastSpawn=now; }
}

function draw(now){
  ctx.fillStyle="#20252f";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  const camX=player.x-canvas.width/2;
  const camY=player.y-canvas.height/2;

  ctx.save();
  ctx.translate(-camX,-camY);

  bottles.forEach(b=>{
    const w=bottleImg.width*BOTTLE_SCALE;
    const h=bottleImg.height*BOTTLE_SCALE;
    ctx.drawImage(bottleImg,b.x-w/2,b.y-h/2,w,h);
  });

  if(gypsyImg.complete){
    ctx.drawImage(gypsyImg,player.x-32,player.y-32,64,64);
  }

  ctx.restore();
}

let last=performance.now();
function loop(t){
  const dt=t-last; last=t;
  update(dt,t); draw(t);
  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);
</script>
</body>
</html>
